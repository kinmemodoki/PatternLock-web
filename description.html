<!DOCTYPE html>
<html>
  <head>
    <meta name="robots" content="noindex,nofollow" />
    <meta charset="UTF-8">
    <title>説明ページ</title>
    <meta name="viewport" content="width=640 user-scalable=no">
    <link href="stylesheets/sanitize.css"  rel="stylesheet" type="text/css" />
    <link href="stylesheets/bootstrap.min.css"  rel="stylesheet" type="text/css" />
    <link href="stylesheets/main.css"  rel="stylesheet" type="text/css" />
    <link href="stylesheets/description.css"  rel="stylesheet" type="text/css" />
  </head>
<body>
  <!--
  <div class="header">
    <div class="left">ゲーム説明</div>
    <div class="right">実験説明</div>
  </div>
  -->

  <div class="section">
    <div class="title dottext">Caution</div>
    <div class="text game-frame">
      このゲームで使われるパターンは実験用サーバに送信されます．
      <span style="color:#D22">個人の携帯端末で使用しているパターンは設定しないでください．</span>
    </div>
  </div>


  <div class="section">
    <div class="title dottext">ゲーム説明</div>
    <div class="text game-frame">
      <img src="img/sample1.jpg">
      <div class="catch">パターンロック解除で冒険を進めよう</div>
      このゲームはあなたがパターンロックを解除するごとにゲームが進行します．
      パターンロックを表示するとモンスターが出現し，ロックを解除することでプレイヤーがモンスターに攻撃します．
      モンスターを倒して，ドロップするお金やお宝をゲットし．新しい武器素材を購入したり，各ステージのお宝を集めよう．
    </div>
    <div class="text game-frame">
      <img src="img/sample2.jpg">
      <div class="catch">「パターンの安全さ」＝「武器の強さ」</div>
      モンスターを攻撃する武器は，あなたが設定するパターンの安全さに応じて強くなります．
      また，武器を作るための素材も良いものを使えば使うほど強くなります．
      あなただけのオリジナルパターンで武器を作り，最強の武器を目指しましょう．
    </div>

    <div class="text game-frame">
      <img src="img/sample3.jpg">
      <div class="catch">ゲームの流れ</div>
      まず通常のパターンロックと同じようにロックパターンを設定し武器を作りましょう．
      次に勇者の冒険先を決めましょう．
      勇者が冒険に行っていなくてもロック解除はできますが，
      お宝をゲットしたいなら，冒険先を設定することをおすすめします．
      冒険先の勇者が戦闘している際にロック解除を行うと勇者が敵に攻撃します．
      ここで敵を倒すとお宝がゲットできます．
      ゲットしたお宝は鑑定所で鑑定してもらいましょう．
      手に入れた金貨で新しい武器素材を買ってより強い武器を作りましょう．
    </div>
  </div>
  <div class="section">
    <div class="title dottext">Q&A</div>
    <div class="text game-frame">
      <div class="catch">パターンを忘れた！</div>
      鍛冶屋に行くことでパターンの再設定ができます．
      パターンを再設定することによるデメリットはありません．<br><br>

      <div class="catch">敵が強すぎる！</div>
      砂漠や火山の冒険先を選んでいませんか？
      冒険先選択ページでは下にいくほど強い敵が出現するようになっています．
      まずは平原や森で金貨を集めて，武器を強化してみましょう．<br><br>

      <div class="catch">オーガが消えた...</div>
      「オーガ」は最初のボス敵です．
      ボス敵は認証画面の下部分の進行ゲージが赤いときにだけ出現します．
      最初は倒せないかもしれませんが，
      ボス敵はレアな報酬を落としやすいので武器を強化して再挑戦してみよう．
    </div>
  </div>

  <div class="section">
    
    <div class="text game-frame">
    <div class="title dottext">実験説明</div>
      <div class="catch">実験内容</div>
      <ul>
        <li>1日3回以上，認証(敵への攻撃)を行ってください．</li>
        <li>ゲームからの通知許可(朝昼晩にリマインド通知を送ります)<br>
            LINE botのリマインドでも可能</li>
        <li>ゲーム開始3日後にアンケート(約30分)に回答してください．</li>
      </ul>
      　（ゲーム開始3日後にアンケート用URLのリマインドをします）
      <br>
      <br>
      <div class="catch">収集されるデータ</div>
      <ol>
        <li>設定されたパターン</li>
        <li>パターンの強度</li>
        <li>パターンを新しく設定した日時</li>
        <li>認証した日時(敵を攻撃した日時)</li>
      </ol>
        <br>
      <div class="catch">注意事項</div>
        <ul>
          <li>ここで収集されるデータは論文及び，今後の研究で使用されます</li>
          <li>報酬はでません．ごめんね．</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="buttons" id="btns">
    <div id="form">
      実験識別id：<textarea id="text" placeholder="無記入でも可" rows="1" cols="16" maxlength="16"></textarea><br><br>
      <input type="checkbox" id="chkbox">上記の説明を理解した．</input><br><br>
      <button onclick="agree()">上記説明を理解したうえでゲームを始める</button>
      <button onclick="notAgree()">実験せずにゲームを始める</button>
    </div>
    <div id="back">
      <button onclick="back()" id="">マイページに戻る</button><br>
      <button onclick="allReset()" id="">データ全消し</button>
    </div>
  </div>
</body>
  <script src="scripts/cookies.js"></script>
  <script type="text/javascript">
    var context = getUserData();
    var user = context.player ? JSON.parse(context.player) : {};

    if(user.id){
      document.getElementById("form").style = "display:none;";
    }else{
      document.getElementById("back").style = "display:none;";
    }

    function create_privateid( n ){
      var CODE_TABLE = "0123456789"
          + "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
          + "abcdefghijklmnopqrstuvwxyz";
      var r = "";
      for (var i = 0, k = CODE_TABLE.length; i < n; i++){
          r += CODE_TABLE.charAt(Math.floor(k * Math.random()));
      }
      r = document.getElementById("text").value + r;
      return r;
    }

    function agree(){
      var checked = document.getElementById("chkbox").checked;
      if(checked){
        if(confirm("実験データを送信しながらプレイをします．\nよろしいですか？")){
          if(!user.id){
            user.id = create_privateid(24);
            docCookies.setItem("player",JSON.stringify(user));
          }
          location.href="./index.html"
        }
      }else{
        alert("チェックボックスをチェックして同意してね");
      }
    }

    function notAgree(){
      user.id = "notTrace";
      docCookies.setItem("player",JSON.stringify(user));
      back();
    }

    function allReset(){
      if(window.confirm('この操作は取り消せません．\n本当にデータを削除しますか？') && window.confirm('本当に削除しますか？')){
        var initUser = {id:user.id, group:user.group};
        docCookies.setItem("player",JSON.stringify(initUser));
        docCookies.setItem("vpyage",JSON.stringify({}));
        location.href="./index.html" 

      }
    }

    function back(){
      location.href="./mypage.html" 
    }
  </script>
</html>